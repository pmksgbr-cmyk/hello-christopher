<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mieter (Online)</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>Mieterübersicht 🏠 (online)</h1>

  <input id="name" type="text" placeholder="Neuer Mietername">
  <button onclick="addTenant()">Hinzufügen</button>

  <ul id="list"></ul>

  <p><a href="index.html">⬅️ Zurück</a></p>

  <script>
    // TODO: HIER deine Werte einsetzen:
    const SUPABASE_URL = "https://ydraecgzxatvphidsjmo.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkcmFlY2d6eGF0dnBoaWRzam1vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNTkwNTMsImV4cCI6MjA3MjczNTA1M30.sS350GFY-MY2MsWP2x0Ar9K8Je04-JWVodMTu6HxG5I";

    const client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);

    async function load() {
      const ul = document.getElementById("list");
      ul.innerHTML = "Lade...";
      const { data, error } = await client.from("tenants").select("*").order("created_at", { ascending: true });
      if (error) { ul.innerHTML = "Fehler: " + error.message; return; }
      ul.innerHTML = "";
      data.forEach(row => {
        const li = document.createElement("li");
        li.textContent = row.name + " ";
        const del = document.createElement("button");
        del.textContent = "✕";
        del.onclick = () => removeTenant(row.id);
        ul.appendChild(li);
        li.appendChild(del);
      });
    }

    async function addTenant() {
      const input = document.getElementById("name");
      const name = input.value.trim();
      if (!name) return;
      await client.from("tenants").insert({ name });
      input.value = "";
      load();
    }

    async function removeTenant(id) {
      await client.from("tenants").delete().eq("id", id);
      load();
    }

    load();
  </script>
</body>
</html>
